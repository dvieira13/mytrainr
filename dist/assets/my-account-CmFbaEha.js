import{d as y,g as T,c as f,a as M}from"./main-DwmqFbjY.js";let l,_;const d=document.querySelector("#user_name"),p=document.querySelector("#user_miles"),g=document.querySelector("#user_time"),v=document.querySelector("#user_workouts"),H=document.querySelector(".no_event_comp"),L=document.querySelectorAll(".has_event_comp");N();function N(){const e=sessionStorage.getItem("user_id");if(e&&(l=e,_=h(l),_!=null))if(y(l)==!0){let t=T(l);t&&(E(_,t),I(t)),L.forEach(r=>{r.classList.remove("hide-account-comp")})}else q(_),H.classList.remove("hide-account-comp")}function h(e){const t=localStorage.getItem("trainr_users");return t?JSON.parse(t).find(n=>n.user_id===e)??null:null}function q(e){d.innerHTML=e.user_first_name+" "+e.user_last_name,p.innerHTML=e.user_total_miles.toString(),g.innerHTML=e.user_total_time,v.innerHTML=e.user_total_workouts.toString()}function E(e,t){d.innerHTML=e.user_first_name+" "+e.user_last_name,p.innerHTML=P(t.event_id).toString(),g.innerHTML=f(F(t.event_id)),v.innerHTML=R(t.event_id).toString()}function I(e){C(e.event_name),J(D(e.event_date).toString(),W(e.event_id).toString()),U(f(e.event_goal_time),f(M(e.event_goal_time,e.event_distance))),O(b(e.event_id).toString())}function C(e){const t=document.querySelector("#event_name");t.innerHTML=e}function J(e,t){const r=document.querySelector("#days_until_race"),o=document.querySelector("#workouts_remaining");r.innerHTML=e,o.innerHTML=t}function O(e){const t=document.querySelector("#training_progress"),r=document.querySelector(".progress-bar-fill"),o=r.querySelector(".progress-percentage");t.innerHTML=e+"%",r.style.width=e+"%",Number(e)<15&&o.classList.remove("percentage-inside")}function U(e,t){const r=document.querySelector("#total_time_goal"),o=document.querySelector("#avg_pace_goal");r.innerHTML=e,o.innerHTML=t}function D(e){const t=new Date(e),r=new Date;t.setHours(0,0,0,0),r.setHours(0,0,0,0);const o=1e3*60*60*24,n=t.getTime()-r.getTime();return Math.ceil(n/o)}function W(e){const t=localStorage.getItem("trainr_events");if(!t)return 0;const o=JSON.parse(t).find(s=>s.event_id===e);if(!o||!o.workout_plan)return 0;let n=0;for(const s of o.workout_plan)for(const c of s)!c.workout_complete&&c.workout_type!=="rest day"&&n++;return n}function R(e){const t=localStorage.getItem("trainr_events");if(!t)return 0;const o=JSON.parse(t).find(s=>s.event_id===e);if(!o||!o.workout_plan)return 0;let n=0;for(const s of o.workout_plan)for(const c of s)c.workout_type!=="rest day"&&c.workout_complete&&n++;return n}function b(e){const t=localStorage.getItem("trainr_events");if(!t)return 0;const o=JSON.parse(t).find(c=>c.event_id===e);if(!o||!o.workout_plan)return 0;let n=0,s=0;for(const c of o.workout_plan)for(const u of c)u.workout_type!=="rest day"&&(n++,u.workout_complete&&s++);return n===0?0:Math.round(s/n*100)}function P(e){const t=localStorage.getItem("trainr_events");if(!t)return 0;const o=JSON.parse(t).find(s=>s.event_id===e);if(!o||!o.workout_plan)return 0;let n=0;for(const s of o.workout_plan)for(const c of s)c.workout_complete&&c.workout_type!=="rest day"&&(n+=c.workout_distance);return parseFloat(n.toFixed(1))}function F(e){const t=localStorage.getItem("trainr_events");if(!t)return"00:00:00";const o=JSON.parse(t).find(i=>i.event_id===e);if(!o||!o.workout_plan)return"00:00:00";let n=0;for(const i of o.workout_plan)for(const a of i)if(a.workout_complete&&a.workout_type!=="rest day"&&a.workout_time){const[S,k,w]=a.workout_time.split(":").map(Number);n+=S*3600+k*60+w}const s=Math.floor(n/3600),c=Math.floor(n%3600/60),u=n%60,m=i=>i.toString().padStart(2,"0");return`${m(s)}:${m(c)}:${m(u)}`}
